<script src="https://code.jquery.com/jquery-2.2.4.min.js">


</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.2.0/zxcvbn.js">


</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hideshowpassword/2.1.1/hideShowPassword.min.js">


</script>
<script type="text/javascript">
  var strength = {
    0: "Worst",
    1: "Bad",
    2: "Weak",
    3: "Good",
    4: "Strong"
  }

  var password = document.getElementById('IDToken2');
  var meter = document.getElementById('password-strength-meter');
  var text = document.getElementById('password-strength-text');
  meter.style.display = "none";
  password.addEventListener('input', function () {
    var val = password.value;
    var result = zxcvbn(val);

    // Update the password strength meter   // Update the password strength meter
    meter.value = result.score;

    // Update the text indicator
    if (val !== "") {
      meter.style.display = "inline-block";
      text.innerHTML = "Password strength: " + "<strong>" + strength[result.score] + "</strong>";
    } else {
      text.innerHTML = "&nbsp;";
      meter.style.display = "none";
    }
  });

  function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
      results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
  }

  $(document).ready(function () {
    //set user id from url param
    var id = getParameterByName('id');
    console.log(id);
    if(id !== null ){
      $('#IDToken1').val(id).prop('disabled', true);;
    }


    //show password toggle
    $('input:password').hidePassword('focus');

    //you have to use keyup, because keydown will not catch the currently entered value
    $('#IDToken2').keyup(function () {

      // set password variable
      var pswd = $(this).val();

      //validate the length
      if (pswd.length < 8) {
        $('#length').removeClass('valid').addClass('invalid');
      } else {
        $('#length').removeClass('invalid').addClass('valid');
      }

      //validate letter
      if (pswd.match(/[A-z]/)) {
        $('#letter').removeClass('invalid').addClass('valid');
      } else {
        $('#letter').removeClass('valid').addClass('invalid');
      }

      //validate uppercase letter
      if (pswd.match(/[A-Z]/)) {
        $('#capital').removeClass('invalid').addClass('valid');
      } else {
        $('#capital').removeClass('valid').addClass('invalid');
      }

      //validate number
      if (pswd.match(/\d/)) {
        $('#number').removeClass('invalid').addClass('valid');
      } else {
        $('#number').removeClass('valid').addClass('invalid');
      }

    }).focus(function () {
      $('#pswd_info').show();
    }).blur(function () {
      $('#pswd_info').hide();
    });

  });

</script>
